"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCssScopedName = exports.getLocalIP = void 0;
const os_1 = require("os");
let localIP = '';
function getLocalIP() {
    if (!localIP) {
        localIP = 'localhost';
        const interfaces = os_1.networkInterfaces();
        for (const devName in interfaces) {
            const isEnd = interfaces[devName]?.some((item) => {
                if (item.family === 'IPv4' && item.address !== '127.0.0.1' && !item.internal) {
                    localIP = item.address;
                    return true;
                }
                return false;
            });
            if (isEnd) {
                break;
            }
        }
    }
    return localIP;
}
exports.getLocalIP = getLocalIP;
function getCssScopedName(srcPath, localName, mfileName) {
    if (mfileName.match(/[/\\]global.module.\w+?$/)) {
        return `g-${localName}`;
    }
    mfileName = mfileName
        .replace(/^.*[/\\]node_modules[/\\]/, 'modules/')
        .replace(/^@.+?[/\\]/, '')
        .replace(srcPath, '')
        .replace(/\W/g, '-')
        .replace(/^-|-index-module-\w+$|-module-\w+$|-index-vue$|-vue$/g, '')
        .replace(/^components-/, 'comp-')
        .replace(/^modules-.*?(\w+)-views(-?)(.*)/, '$1$2$3')
        .replace(/^modules-.*?(\w+)-components(-?)(.*)/, '$1-comp$2$3');
    return localName === 'root' ? mfileName : `${mfileName}_${localName}`;
}
exports.getCssScopedName = getCssScopedName;
